(function(){const ROOT_SELECTOR="[data-hb-pro-program]",GLOBAL_INIT_KEY="__hbProProgramInitAll";function getContext(scope){return scope&&typeof scope.querySelectorAll=="function"?scope:document}function toBaseTitle(title){if(typeof title!="string")return"";const separators=[" \u2014 "," \u2013 "," | "," - ",": "];let result=title;return separators.some(separator=>{const index=result.indexOf(separator);return index>-1?(result=result.slice(0,index),!0):!1}),result.trim()}function detectMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function getVolumeLabel(selectValue,customInput){if(selectValue==="custom"&&customInput){const parsed=Number.parseInt(customInput.value,10);return Number.isFinite(parsed)&&parsed>0?String(parsed):""}return selectValue||""}function toggleCustomInput(input,shouldShow){input&&(input.toggleAttribute("hidden",!shouldShow),shouldShow?input.focus():input.value="")}function buildMessage({baseTitle,volume,frequency,sku}){const volumeLabel=volume?`${volume} un`:"\u2014 un",frequencyLabel=frequency||"Mensal",skuLabel=sku||"";return["Ol\xE1, sou profissional e tenho interesse em CONDI\xC7\xC3O PROFISSIONAL / CONTRATO DE FORNECIMENTO.","",`Produto: ${baseTitle}`,`Quantidade mensal desejada: ${volumeLabel}`,`Frequ\xEAncia: ${frequencyLabel}`,`SKU: ${skuLabel}`,"","Necessito: pre\xE7o por volume, estabilidade de abastecimento e prazos garantidos.","Nome/Raz\xE3o Social:","CNPJ/CPF:","Cidade:","UF:","CEP:"].join(`
`)}function getWhatsappBaseUrl(){return detectMobile()?"https://api.whatsapp.com/send":"https://web.whatsapp.com/send"}function updateLink({button,phone,baseTitle,volume,frequency,sku}){if(!button)return;const message=buildMessage({baseTitle,volume,frequency,sku}),searchParams=new URLSearchParams({phone:phone||"15558043916",text:message,utm_source:"produto",utm_medium:"whatsapp",utm_campaign:"pro-volume"}),url=`${getWhatsappBaseUrl()}?${searchParams.toString()}`;button.setAttribute("href",url)}function init(root){if(!root||root.dataset.hbProProgramInit==="true")return;const phone=root.dataset.whatsappPhone||"15558043916",baseTitle=toBaseTitle(root.dataset.productTitle||""),sku=root.dataset.productSku||"",volumeSelect=root.querySelector("[data-hb-pro-volume]"),customVolumeInput=root.querySelector("[data-hb-pro-volume-custom]"),frequencySelect=root.querySelector("[data-hb-pro-frequency]"),button=root.querySelector("[data-hb-pro-whats]");if(!volumeSelect||!frequencySelect||!button){root.dataset.hbProProgramInit="true";return}const state={get volume(){return getVolumeLabel(volumeSelect.value,customVolumeInput)},get frequency(){return frequencySelect.value||"Mensal"}},refreshLink=()=>{updateLink({button,phone,baseTitle,volume:state.volume,frequency:state.frequency,sku})};volumeSelect.addEventListener("change",()=>{const isCustom=volumeSelect.value==="custom";toggleCustomInput(customVolumeInput,isCustom),refreshLink()}),["input","change"].forEach(eventName=>{customVolumeInput?.addEventListener(eventName,refreshLink)}),frequencySelect.addEventListener("change",refreshLink),refreshLink(),root.dataset.hbProProgramInit="true"}function initAll(scope){getContext(scope).querySelectorAll(ROOT_SELECTOR).forEach(init)}function handleSectionUnload({target}){getContext(target).querySelectorAll(ROOT_SELECTOR).forEach(root=>{delete root.dataset.hbProProgramInit})}if(window[GLOBAL_INIT_KEY]){window[GLOBAL_INIT_KEY](document);return}window[GLOBAL_INIT_KEY]=initAll,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>initAll(document)):initAll(document),document.addEventListener("product-info:loaded",({target})=>initAll(target)),document.addEventListener("shopify:section:load",({target})=>initAll(target)),document.addEventListener("shopify:section:unload",handleSectionUnload)})();
//# sourceMappingURL=/cdn/shop/t/96/assets/hb-professional-program.js.map
