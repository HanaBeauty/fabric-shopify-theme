((global,factory)=>{const helpers=factory(global);typeof module=="object"&&typeof module.exports=="object"?module.exports=helpers:(global.hbPriceBenefits=helpers,helpers&&typeof helpers.autoStart=="function"&&helpers.autoStart(global.document))})(typeof globalThis<"u"?globalThis:window,global=>{const documentRef=global?.document,RATES={7:.0748,8:.081,9:.0872,10:.0917,11:.0979,12:.1042},formatBRL=(()=>{try{const formatter=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2});return cents=>formatter.format((Number(cents)||0)/100)}catch{return cents=>`R$ ${((Number(cents)||0)/100).toFixed(2).replace(".",",")}`}})();function compute(priceCents,count){const rate=count<=6?0:RATES[count]||0,total=Math.round(priceCents*(1+rate)),per=Math.round(total/count);return{count,rate,per,total}}function renderTable(tbody,priceCents){if(!tbody)return;const doc=tbody.ownerDocument||documentRef;if(doc){tbody.innerHTML="";for(let count=1;count<=12;count+=1){const{rate,per,total}=compute(priceCents,count),tr=doc.createElement("tr");count===6&&tr.classList.add("hb-benefits__row--highlight");const tdCount=doc.createElement("td");tdCount.textContent=`${count}x`,tr.appendChild(tdCount);const tdPer=doc.createElement("td");tdPer.textContent=formatBRL(per),tr.appendChild(tdPer);const tdTotal=doc.createElement("td");tdTotal.textContent=formatBRL(total),tr.appendChild(tdTotal);const tdRate=doc.createElement("td");tdRate.textContent=rate===0?"sem juros":`${(rate*100).toFixed(2).replace(".",",")}%`,tr.appendChild(tdRate),tbody.appendChild(tr)}}}function renderSummary(root,priceCents){const priceEl=root.querySelector(".hb-benefits__price"),installmentsEl=root.querySelector(".hb-benefits__installments"),pointsEl=root.querySelector(".hb-benefits__points"),six=Math.round(priceCents/6),points=Math.floor(priceCents/100);priceEl&&(priceEl.textContent=formatBRL(priceCents)),installmentsEl&&(installmentsEl.textContent=` ou 6x de ${formatBRL(six)}`),pointsEl&&(pointsEl.textContent=` e ganhe ${points} pontos`)}function update(root,priceCents){const normalized=Number(priceCents);Number.isNaN(normalized)||!root||(root.dataset.hbPrice=String(normalized),renderSummary(root,normalized),renderTable(root.querySelector("[data-hb-table-body]"),normalized))}function attachVariantListeners(root,doc=documentRef){if(!doc)return;const handler=event=>{const variant=event?.detail?.variant;variant&&typeof variant.price=="number"&&update(root,variant.price)};doc.addEventListener("variant:change",handler),doc.addEventListener("theme:variant:change",handler),doc.addEventListener("product:variant-change",handler)}function init(root,doc=documentRef){if(!root)return;const priceCents=Number(root.dataset.hbPrice||0)||0;update(root,priceCents),attachVariantListeners(root,doc)}function start(doc=documentRef){doc&&doc.querySelectorAll("[data-hb-benefits]").forEach(root=>init(root,doc))}function autoStart(doc=documentRef){if(!doc)return;const run=()=>start(doc);doc.readyState==="loading"?doc.addEventListener("DOMContentLoaded",run):run()}return{RATES,formatBRL,compute,renderTable,renderSummary,update,attachVariantListeners,init,start,autoStart}});
//# sourceMappingURL=/cdn/shop/t/96/assets/hb-price-benefits.js.map
